<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <link rel="stylesheet" href="index.css">
    <link rel="shortcut icon" href="icons/socketwhite.png" type="image/x-icon">
    <script src="app.js" defer></script>
    <title>sock</title>
</head>
<body>
    <div id="loader">
        <div>
            <style>
                body,div{
                    display: flex;
                    margin: auto;
                    padding: 0px;
                }img{
                    margin: auto;
                    width: 50%;
                    height: auto;
                }
            </style>
            <img src="icons/socketwhite.png" alt="SOCK">
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const resources = document.querySelectorAll('link[rel="stylesheet"], script[defer], script[src]');
                let loadedResources = 0;
                const totalResources = resources.length;

                function checkReady() {
                    if (loadedResources-1 === totalResources) {
                        setTimeout(function() {
                            document.getElementById("loader").remove();
                            document.getElementById("appContent").style.display = "block";
                        }, 100);
                    }else{
                        loadedResources++;
                        console.log(totalResources," out of", loadedResources);
                    }
                }

                resources.forEach(resource => {
                    if ((resource.tagName === 'LINK' && resource.sheet) || 
                        (resource.tagName === 'SCRIPT' && (resource.readyState === 'complete' || resource.readyState === 'loaded'))) {
                        checkReady();
                    } else {
                        resource.addEventListener('load', checkReady, { once: true });
                    }
                });

                if (totalResources === 0) {
                    setTimeout(function() {
                        window.location.reload();
                    }, 5000);
                }
            });
        </script>
    </div>
    <div id="appContent" style="display: none;">
        <div>
            <a href="">
                <span class="material-symbols-outlined">home</span>
            </a>
        </div>
        <div>
            <div>Show messages</div>
        </div>
        <div>
            sent messages
        </div>
        <div>
            search
        </div>
        <div>
            profile
        </div>
    </div>
</body>
</html>
