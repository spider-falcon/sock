<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />    <link rel="stylesheet" href="index.css">
    <link rel="shortcut icon" href="icons/socketwhite.png" type="image/x-icon">
    <script src="app.js" defer></script>
    <title>sock</title>
</head>
<body>
    <div id="loader">
        <div>
            <style>
                body,div{
                    display: flex;
                    margin: auto;
                    padding: 0px;
                }img{
                    margin: auto;
                    width: 50%;
                    height: auto;
                }
            </style>
            <img src="icons/socketwhite.png" alt="SOCK">
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
    const resources = document.querySelectorAll('link[rel="stylesheet"], script[defer], script[src]');
    let loadedResources = 0;
    const totalResources = resources.length;

    function checkReady() {
        console.log(loadedResources, "out of", totalResources);
        if ((loadedResources+1) === totalResources) {
            setTimeout(function() {
                loadedResources++;
                document.getElementById("loader").remove();
                document.getElementById("appContent").style.display = "block";
            }, 100);
        }
    }

    if (totalResources === 0) {
        setTimeout(function() {
            window.location.reload();
        }, 8000);
    } else {
        resources.forEach(resource => {
            if (resource.tagName === 'LINK' && resource.sheet) {
                loadedResources++;
                checkReady();
            } else if (resource.tagName === 'SCRIPT' && (resource.readyState === 'complete' || resource.readyState === 'loaded')) {
                loadedResources++;
                checkReady();
            } else {
                resource.addEventListener('load', function() {
                    loadedResources++;
                    checkReady();
                }, { once: true });

                resource.addEventListener('error', function() {
                    console.error('Resource failed to load:', resource);
                    loadedResources++;
                    checkReady();
                }, { once: true });
            }
        });

        // Set a timeout to reload the page if resources take too long to load
        setTimeout(function() {
            if (loadedResources < totalResources) {
                window.location.reload();
            }
        }, 8000);
    }
});

        </script>
    </div>
    <div id="appContent" style="display: none;">
        <center class="bottom">
            <div class="navigateBar">
                <a href="">
                    <img id="smallLogo" src="/icons/socketdark.png" alt="" width="30" height="30">
                </a>
                <a href="">
                    <span class="material-symbols-rounded">search</span>
                </a>
                <a href="">
                    <span class="material-symbols-rounded">home</span>
                </a>
                <a href="">
                    <span class="material-symbols-rounded">explore</span>
                </a>
            </div>
        </center>
        <center>
            <div id="mySocket" style="display: none;">
                <div class="options">
                    <button id="butWorldGallery">World</button>
                    <button id="butMyGallery">My Connections</button>
                </div>
                <div id="mySocketContent">Show messages</div>
            </div>
            <div id="searchDiv" style="display: none;">
                <div class="searchField">
                        <input type="text" name="searchQuery" id="searchQuery">
                </div>
                <div id="searchFilterDiv">
                    <span>search</span>
                    <span>filters</span>
                    <span>options</span>
                </div>
                <div>
                    search results
                </div>
            </div>
            <div id="profileDiv">
                <div id="profileDivFrame">
                    <img id="userMainlogo" src="icons/socketdark.png" alt="" width="100">
                    <div>
                        <h1 id="usernameMain">username</h1>
                        <h2 id="user_nameMain">Name</h2>
                        <div>
                            <button>
                                <p>Posts</p>
                                <span>No post</span>
                            </button>
                            <button>
                                <p>followers</p>
                                <span>0</span>
                            </button>
                            <button>
                                <p>following</p>
                                <span>0</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div>
                    <button>
                        <p>Posts</p>
                        <span>No post</span>
                    </button>
                    <button>
                        <p>followers</p>
                        <span>0</span>
                    </button>
                    <button>
                        <p>following</p>
                        <span>0</span>
                    </button>
                </div>
                <div>
                    <button>
                        <p>Edit</p>
                        <span>No post</span>
                    </button>
                    <button>
                        <p>request</p>
                        <span>0</span>
                    </button>

                </div>
                <div>
                    <div class="options">
                        <button>Posts</button>
                        <button>Media</button>
                        <button>library</button>
                        <button>About</button>
                    </div>
                </div>
                <div>
                    content
                </div>
            </div>
        </center>
    </div>
</body>
</html>
